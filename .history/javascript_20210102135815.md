# JavaScript

[Documentation](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference)


[JavaScript reference - JavaScript | MDN](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference)


[DOM Standard](https://dom.spec.whatwg.org/)

## NPM

### Getting Started
   
List everything you have installed in the current directory

      npm ls

Search the registry for packages matching terms

      npm search[search terms]

Install a package

      npm install[<name> [<name> ...]] [--save|--save-dev|--save-optional]

This command installs a package, or packages, and any packages that it depends on in the current directory. If the package has a shrinkwrap file, the installation of dependencies will be driven by that.

If no package.json exists, these options are ignored. If it exists, they'll update them if they are already there.

- `--save`: Package will appear in your depedencies.
- `--save-dev`: Package will appear in your devDependencies.
- `--save-optional`: Package will appear in your optionalDependencies.
- `--global`: Package will be installed globally (if you want to use it as a command line tool for example)

Install a package in the version

            npm install <module-name>@<version-name>

Uninstall a package, completely removing everything npm installed on its behalf
      
      npm uninstall

Update all the packages listed to the latest version (specified by the tag config). Also install missing packages
      
      npm update [<name> [<name> ...]]
Update the global npm version
      
      npm update npm -g

Display the README.md / documentation / npmjs.org page of a give library
      
      npm docs <module-name>
Run package test suite, based on setup in package.json in
            
      "scripts" : {"test" : "node testfile.js"}

List outdated libraries compared to currently installed node_modules
            
      npm outdated

Lock down dependency versions
            
      npm shrinkwrap

### Develop
    
Interactively create a package.json file
            
      npm init
         
Asks you a bunch of questions, and then writes a package.json for you. If you already have a package.json file, it'll read that first, and default to the options in there.
            
Install a git specific release
            
      npm install git://github.com/Marak/colors.js#v0.6.0

Locally edit a dependency
            
      npm edit <module_name>

Setup editor for npm edit
               
      npm config set editor "sublime"

Publish a package not under the default "latest" tag
               
      npm publish --tag beta
      

## VS Code

Install Live server

Open workspace
index.html -> type ! and hit tab

```html

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=.5, initial-scale=1.0">
    <title>TestDoc</title>
    <script src="index.js"></script>
</head>
<body>
    
</body>
</html>
```

create index.js.

Live server is in the bottom, or if ot, select open with liveserver 
on right click.


## Basics

declarations are with `let` and `var`. `const` is an immutable value.

can end in a semicolon or not.

 - ==, !=, >=, <=, >, < 


`===` = strict equality type.  `==` tries to convert both types to a common type.

3 ==  3  T
3 == '3' T
3 === '3' F

`!==` is strict inequality.


### Arrays

Zero indexed, can be mixed, including more arrays.

      var ourArray = ["string", 123];

      var nestedArray = [[2,3] , 4 ,5 ];

      var nestedAccess= nestedArray[0][0] //2

Arrays are mutable (unlike char arrays (strings))

You can append to an array with `push`

      var myArr = [['a', 'b'], ['c', 'd']];
      myArr.push(['e', 'f']);

can also `pop`

      var myArr = [1, 2, 3];
      myArr.pop();

Alternatively, `shift` removes the first element

      var myArr = [1, 2, 3];
      myArr.shift();

The push equivalent of `shift` is `unshift`.  This pushes an element onto the front of the stack.


## Objects

## Math


[Math Definition](https://tc39.es/ecma262/#sec-math-object)

[Math Summary](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math)


(^.+$)\n(^.*$) - `$1` - $2\n

- **Static Values (Constants)**
  - `Math.E` - Euler's constant and the base of natural logarithms; approximately 2.718.
  - `Math.LN2` - Natural logarithm of 2; approximately 0.693.
  - `Math.LN10` - Natural logarithm of 10; approximately 2.303.
  - `Math.LOG2E` - Base-2 logarithm of E; approximately 1.443.
  - `Math.LOG10E` - Base-10 logarithm of E; approximately 0.434.
  - `Math.PI` - Ratio of the a circle's circumference to its diameter; approximately 3.14159.
  - `Math.SQRT1_2` - Square root of ½ (or equivalently, 1/√2); approximately 0.707.
  - `Math.SQRT2` - Square root of 2; approximately 1.414.
- **Static methods**
  - `Math.abs(x)` - Returns the absolute value of x.
  - `Math.acos(x)` - Returns the arccosine of x.
  - `Math.acosh(x)` - Returns the hyperbolic arccosine of x.
  - `Math.asin(x)` - Returns the arcsine of x.
  - `Math.asinh(x)` - Returns the hyperbolic arcsine of a number.
  - `Math.atan(x)` - Returns the arctangent of x.
  - `Math.atanh(x)` - Returns the hyperbolic arctangent of x.
  - `Math.atan2(y, x)` - Returns the arctangent of the quotient of its arguments.
  - `Math.cbrt(x)` - Returns the cube root of x.
  - `Math.ceil(x)` - Returns the smallest integer greater than or equal to x.
  - `Math.clz32(x)` - Returns the number of leading zeroes of the 32-bit integer x.
  - `Math.cos(x)` - Returns the cosine of x.
  - `Math.cosh(x)` - Returns the hyperbolic cosine of x.
  - `Math.exp(x)` - Returns Ex, where x is the argument, and E is Euler's constant (2.718…, the base of the natural logarithm).
  - `Math.expm1(x)` - Returns subtracting 1 from exp(x).
  - `Math.floor(x)` - Returns the largest integer less than or equal to x.
  - `Math.fround(x)` - Returns the nearest single precision float representation of x.
  - `Math.hypot([x[, y[, …]]])` - Returns the square root of the sum of squares of its arguments.
  - `Math.imul(x, y)` - Returns the result of the 32-bit integer multiplication of x and y.
  - `Math.log(x)` - Returns the natural logarithm (㏒e; also, ㏑) of x.
  - `Math.log1p(x)` - Returns the natural logarithm (㏒e; also ㏑) of 1 + x for the number x.
  - `Math.log10(x)` - Returns the base-10 logarithm of x.
  - `Math.log2(x)` - Returns the base-2 logarithm of x.
  - `Math.max([x[, y[, …]]])` - Returns the largest of zero or more numbers.
  - `Math.min([x[, y[, …]]])` - Returns the smallest of zero or more numbers.
  - `Math.pow(x, y)` - Returns base x to the exponent power y (that is, xy).
  - `Math.random()` - Returns a pseudo-random number between 0 and 1.
  - `Math.round(x)` - Returns the value of the number x rounded to the nearest integer.
  - `Math.sign(x)` - Returns the sign of the x, indicating whether x is positive, negative, or zero.
  - `Math.sin(x)` - Returns the sine of x.
  - `Math.sinh(x)` - Returns the hyperbolic sine of x.
  - `Math.sqrt(x)` - Returns the positive square root of x.
  - `Math.tan(x)` - Returns the tangent of x.
  - `Math.tanh(x)` - Returns the hyperbolic tangent of x.
  - `Math.trunc(x)` - Returns the integer portion of x, removing any fractional digits.


## Strings


Strings are immutable

      var myStr = 'jello';
      myStr[0]='h';
      //error
      mystring = 'hello';

//Strings
var nameVar = 'string'; //quote
nameVar = "String"; //double quotes
nameVar = `String`; //backticks
nameVar = '"String"'; //quote inside a string
nameVar = `'a href=<"some address">'`
var escape = '\'';

string additon

      var str = "hello" + "world";

index strings

      str[0]; 

last letter

      str[str.length - 1];

Vars and strings

      var mystring =  "My name is" + myName

Append 

      myVar += ".";

### String Methods

      myString.length;
      console.log(myStr.length)

## Conditionals

    function isLess(a,b){
      return a < b
    }

    if (val == test) {
      return body
    } else if (val == test2){
      return body2 
    } else {
      return body3
    }


### Case switch


    var val =  0;
    val ans = "";

    switch(val){
      case 1: 
        return;
        break;
      case 2:
        return;
        break;
      default:
        ans =  "";
        break;
    }

## functions


[The arguments object - JavaScript | MDN](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/arguments)


    function exampleFunc(param) {
      return param - 5;
    }

    console.log(exampleFunc(5));

No returned value is specified. 

    var sum;  // global var

    function undefFunc(num) {
      sum = num + num;
    }
    
    console.log(sum)

[ECMA Documentation](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements)


- Value properties
  - Infinity
  - NaN
  - undefined
  - globalThis
- Function properties
  - eval()
  - isFinite()
  - isNaN()
  - parseFloat()
  - parseInt()
  - decodeURI()
  - decodeURIComponent()
  - encodeURI()
  - encodeURIComponent()
- Fundamental objects
  - Object
  - Function
  - Boolean
  - Symbol
- Error objects
  - Error
  - AggregateError
  - EvalError
  - InternalError
  - RangeError
  - ReferenceError
  - SyntaxError
  - TypeError
  - URIError
- Numbers & dates
  - Number
  - BigInt
  - Math
  - Date
- Text processing
  - String
  - RegExp
- Indexed Collections
  - Array
  - Int8Array
  - Uint8Array
  - Uint8ClampedArray
  - Int16Array
  - Uint16Array
  - Int32Array
  - Uint32Array
  - Float32Array
  - Float64Array
  - BigInt64Array
  - BigUint64Array
- Keyed collections
  - Map
  - Set
  - WeakMap
  - WeakSet
- Structured data
  - ArrayBuffer
  - SharedArrayBuffer
  - Atomics
  - DataView
  - JSON
- Control abstraction
  - GeneratorFunction
  - AsyncGeneratorFunction
  - Generator
  - AsyncGenerator
  - AsyncFunction
  - Promise
- Reflection
  - Reflect
  - Proxy
- Internationalization
  - Intl
  - Intl.Collator
  - Intl.DateTimeFormat
  - Intl.DisplayNames
  - Intl.ListFormat
  - Intl.Locale
  - Intl.NumberFormat
  - Intl.PluralRules
  - Intl.RelativeTimeFormat
- WebAssembly
  - WebAssembly
  - WebAssembly.Module
  - WebAssembly.Instance
  - WebAssembly.Memory
  - WebAssembly.Table
  - WebAssembly.CompileError
  - WebAssembly.LinkError
  - WebAssembly.RuntimeError
- Statements
- JavaScript statements and declarations

- Control flow
  - `Block` - A block statement is used to group zero or more statements. The block is delimited by a pair of curly brackets.
  - `break` - Terminates the current loop, switch, or label statement and transfers program control to the statement following the terminated statement.
  - `continue` - Terminates execution of the statements in the current iteration of the current or labeled loop, and continues execution of the loop with the next iteration.
  - `Empty` - An empty statement is used to provide no statement, although the JavaScript syntax would expect one.
  - `if...else` - Executes a statement if a specified condition is true. If the condition is false, another statement can be executed.
  - `switch` - Evaluates an expression, matching the expression's value to a case clause, and executes statements associated with that case.
  - `throw` - Throws a user-defined exception.
  - `try...catch` - Marks a block of statements to try, and specifies a response, should an exception be thrown.
- Declarations
  - `var` - Declares a variable, optionally initializing it to a value.
  - `let` - Declares a block scope local variable, optionally initializing it to a value.
  - `const` - Declares a read-only named constant.
- Functions and classes
  - `function` - Declares a function with the specified parameters.
  - `function*` - Generator Functions enable writing iterators more easily.
  - `async function` - Declares an async function with the specified parameters.
  - `return` - Specifies the value to be returned by a function.
  - `class` - Declares a class.
- Iterations
  - `do...while` - Creates a loop that executes a specified statement until the test condition evaluates to false. The condition is evaluated after executing the statement, resulting in the specified statement executing at least once.
  - `for` - Creates a loop that consists of three optional expressions, enclosed in parentheses and separated by semicolons, followed by a statement executed in the loop.
  - `for each...in ` - Iterates a specified variable over all values of object's properties. For each distinct property, a specified statement is executed. This is deprecated, and you should use for...of instead.
  - `for...in` - Iterates over the enumerable properties of an object, in arbitrary order. For each distinct property, statements can be executed.
  - `for...of` - Iterates over iterable objects (including arrays, array-like objects, iterators and generators), invoking a custom iteration hook with statements to be executed for the value of each distinct property.
  - `for await...of` - Iterates over async iterable objects, array-like objects, iterators and generators, invoking a custom iteration hook with statements to be executed for the value of each distinct property.
  - `while` - Creates a loop that executes a specified statement as long as the test condition evaluates to true. The condition is evaluated before executing the statement.
- Others
  - `debugger` - Invokes any available debugging functionality. If no debugging functionality is available, this statement has no effect.
  - `export` - Used to export functions to make them available for imports in external modules, and other scripts.
  - `import` - Used to import functions exported from an external module, another script.
  - `label` - Provides a statement with an identifier that you can refer to using a break or continue statement.
  - `with ` - Extends the scope chain for a statement.

- Functions and classes
- function
- function*
- async function
- return
- class

- while
- Other
- debugger
- export
- import
- label
- with
- Expressions and operators
- JavaScript expressions and operators. 

- Primary expressions
- this
- function
- class
- function*
- yield
- yield*
- async function
- await
- []
- {}
- /ab+c/i
- ( )
- null
- Left-hand-side expressions
- Property accessors
- new
- new.target
- import.meta
- super
- ...obj
- Increment & decrement
- A++
- A--
- ++A
- --A
- Unary operators
- delete
- void
- typeof
- +
- -
- ~
- !
- Arithmetic operators
- +
- -
- /
- *
- %
- **
- Relational operators
- in
- instanceof
- <
- >
- <=
- >=
- Equality operators
- ==
- !=
- ===
- !==
- Bitwise shift operators
- <<
- >>
- >>>
- Binary bitwise operators
- &
- |
- ^
- Binary logical operators
- &&
- ||
- Conditional (ternary) operator
- (condition ? ifTrue : ifFalse)
- Assignment operators
- =
- *=
- /=
- %=
- +=
- -=
- <<=
- >>=
- >>>=
- &=
- ^=
- |=
- [a, b] = [1, 2]
- {a, b} = {a:1, b:2}
(^.+$)\n(^.+$) - `$1` - $2\n
  - `Block` - A block statement is used to group zero or more statements. The block is delimited by a pair of curly brackets.
  - `break` - Terminates the current loop, switch, or label statement and transfers program control to the statement following the terminated statement.
  - `continue` - Terminates execution of the statements in the current iteration of the current or labeled loop, and continues execution of the loop with the next iteration.
  - `Empty` - An empty statement is used to provide no statement, although the JavaScript syntax would expect one.
  - `if...else` - Executes a statement if a specified condition is true. If the condition is false, another statement can be executed.
  - `switch` - Evaluates an expression, matching the expression's value to a case clause, and executes statements associated with that case.
  - `throw` - Throws a user-defined exception.
  - `try...catch` - Marks a block of statements to try, and specifies a response, should an exception be thrown.
- Declarations
  - `var` - Declares a variable, optionally initializing it to a value.
  - `let` - Declares a block scope local variable, optionally initializing it to a value.
  - `const` - Declares a read-only named constant.
- Functions and classes
  - `function` - Declares a function with the specified parameters.
  - `function*` - Generator Functions enable writing iterators more easily.
  - `async function` - Declares an async function with the specified parameters.
  - `return` - Specifies the value to be returned by a function.
  - `class` - Declares a class.
- Iterations
  - `do...while` - Creates a loop that executes a specified statement until the test condition evaluates to false. The condition is evaluated after executing the statement, resulting in the specified statement executing at least once.
  - `for` - Creates a loop that consists of three optional expressions, enclosed in parentheses and separated by semicolons, followed by a statement executed in the loop.
  - `for each...in ` - Iterates a specified variable over all values of object's properties. For each distinct property, a specified statement is executed. This is deprecated, and you should use for...of instead.
  - `for...in` - Iterates over the enumerable properties of an object, in arbitrary order. For each distinct property, statements can be executed.
  - `for...of` - Iterates over iterable objects (including arrays, array-like objects, iterators and generators), invoking a custom iteration hook with statements to be executed for the value of each distinct property.
  - `for await...of` - Iterates over async iterable objects, array-like objects, iterators and generators, invoking a custom iteration hook with statements to be executed for the value of each distinct property.
  - `while` - Creates a loop that executes a specified statement as long as the test condition evaluates to true. The condition is evaluated before executing the statement.
- Others
  - `debugger` - Invokes any available debugging functionality. If no debugging functionality is available, this statement has no effect.
  - `export` - Used to export functions to make them available for imports in external modules, and other scripts.
  - `import` - Used to import functions exported from an external module, another script.
  - `label` - Provides a statement with an identifier that you can refer to using a break or continue statement.
  - `with ` - Extends the scope chain for a statement.



## Dynamicism

### Event Listeners

Implement the eventTarget interface

    obj.addEventListener("load", imgFetched)

    function imgFetched(ev) {
      // great success
      …
    }

Event listeners can be removed by utilizing the `removeEventListener()` method passing the same arguments.

Events themselves are objects, and implement the Event interface.

`ev` is the event. `ev` is passed to the callback as an arg.


`ev` has properties `type` which is what matches it with an event.  `ev.type` above = `"load"`.  `ev.target` is the property to which it was dispatched, in this case its `obj`.

Most are dispatched by the userAgent.  But can also be synthetic.  Dispatching a synthetic event below:

```js
  // add an appropriate event listener
  obj.addEventListener("cat", function(e) { process(e.detail) })

  // create and dispatch the event
  var event = new CustomEvent("cat", {"detail":{"hazcheeseburger":true}})
  obj.dispatchEvent(event)
  
  if(obj.dispatchEvent(event)) {
    // event was not canceled, time for some magic
    …
  }
```

Events percolate through a tree.

```html
<!doctype html>
<html>
 <head>
  <title>Boring example</title>
 </head>
 <body>
  <p>Hello <span id=x>world</span>!</p>
  <script>
   function test(e) {
     //run the debug 
     debug(e.target, e.currentTarget, e.eventPhase)
   }
   document.addEventListener("hey", test, {capture: true})
   document.body.addEventListener("hey", test)

   //create a new event
   var ev = new Event("hey", {bubbles:true})
   //find where to insert the event (span) and dispatch it.
   document.getElementById("x").dispatchEvent(ev)
  </script>
 </body>
</html>


```

so we add a listener to the document.   Then we add another listener to document.body.  the debug line runs twice from the `test` function.  The `test` part is the callback.

in all cases, ev.target == span element.  

ev.currentTarget - though changes from `document` to `document.body`

ev.eventPhase is `CAPTURING_PHASE` when it hits the first listener in the tree.  Then `BUBBLING_PHASE` as it proceeds down the tree.  If the span element has a listener too, it would 

